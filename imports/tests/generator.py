import datetime

from imports.dto import CitizenDTO
import random

from imports.models import Citizen

max_relatives_count = 20000
names = [
    "Рогов Арнольд Богданович",
    "Павлов Георгий Иванович",
    "Степанов Абрам Лаврентьевич",
    "Моисеев Адам Геннадьевич",
    "Орехов Иннокентий Ефимович",
    "Иванков Михаил Егорович",
    "Бирюков Леонард Альбертович",
    "Петров Игнатий Еремеевич",
    "Суханов Денис Павлович",
    "Федотов Ким Кириллович",
    "Стрелков Юрий Витальевич",
    "Иванков Лука Владиславович",
    "Туров Валентин Семенович",
    "Казаков Терентий Тихонович",
    "Шубин Осип Александрович",
    "Мельников Алексей Ярославович",
    "Рыбаков Федор Станиславович",
    "Ларионов Аристарх Павлович",
    "Кошелев Назарий Еремеевич",
    "Рыбаков Павел Святославович",
    "Беляков Аверкий Викторович",
    "Русаков Казимир Арсеньевич",
    "Гурьев Нисон Тарасович",
    "Туров Леонард Оскарович",
    "Гордеев Гордий Геннадиевич",
    "Мартынов Лаврентий Данилович",
    "Фёдоров Евгений Авксентьевич",
    "Доронин Нинель Андреевич",
    "Субботин Велор Тимофеевич",
    "Беспалов Ярослав Адольфович",
    "Крюков Глеб Онисимович",
    "Фомин Харитон Филиппович",
    "Богданов Петр Глебович",
    "Денисов Май Онисимович",
    "Евдокимов Илья Яковович",
    "Евдокимов Тихон Андреевич",
    "Доронин Оскар Юрьевич",
    "Зуев Эльдар Даниилович",
    "Шубин Клемент Рубенович",
    "Кириллов Рубен Агафонович",
    "Фролов Варлам Ефимович",
    "Зыков Иван Константинович",
    "Данилов Прохор Арсеньевич",
    "Кудрявцев Виссарион Германнович",
    "Бобылёв Устин Игнатьевич",
    "Меркушев Рубен Миронович",
    "Максимов Нелли Михайлович",
    "Беляков Ярослав Миронович",
    "Дементьев Исаак Игнатьевич",
    "Бобров Василий Проклович",
    "Орлов Вальтер Федорович",
    "Дьячков Богдан Владленович",
    "Назаров Витольд Наумович",
    "Шарапов Гаянэ Митрофанович",
    "Богданов Ефим Робертович",
    "Зыков Давид Алексеевич",
    "Владимиров Бенедикт Валерьевич",
    "Лаврентьев Виктор Алексеевич",
    "Борисов Пантелеймон Викторович",
    "Мельников Остап Проклович",
    "Панфилов Ибрагил Денисович",
    "Михеев Гордей Натанович",
    "Карпов Архип Егорович",
    "Жуков Степан Лукьянович",
    "Устинов Панкратий Владленович",
    "Шашков Вадим Наумович",
    "Макаров Федор Геннадьевич",
    "Гусев Ян Ростиславович",
    "Соколов Эдуард Артёмович",
    "Кузнецов Виталий Васильевич",
    "Осипов Ярослав Вениаминович",
    "Субботин Осип Рудольфович",
    "Денисов Кондрат Макарович",
    "Кузнецов Артур Святославович",
    "Матвеев Иван Рудольфович",
    "Карпов Ипполит Протасьевич",
    "Яковлев Алан Ильяович",
    "Беспалов Тимур Лукьевич",
    "Семёнов Лев Мартынович",
    "Яковлев Модест Серапионович",
    "Наумов Алан Мартынович",
    "Горбунов Дональд Филатович",
    "Баранов Ян Георгьевич",
    "Миронов Панкратий Дмитриевич",
    "Копылов Аввакум Богданович",
    "Афанасьев Иннокентий Никитевич",
    "Дроздов Афанасий Гордеевич",
    "Рыбаков Ким Христофорович",
    "Щербакова Альжбета Александровна",
    "Богданова Луиза Федотовна",
    "Архипова Эллина Вячеславовна",
    "Фомичёва Селена Авдеевна",
    "Борисова Нонна Григорьевна",
    "Исакова Зарина Оскаровна",
    "Жукова Раиса Антоновна",
    "Гришина Ивона Дмитриевна",
    "Соловьёва Андриана Фроловна",
    "Меркушева Анита Валерьяновна",
    "Мухина Марьяна Вячеславовна",
    "Кудряшова Триана Филипповна",
    "Данилова Джульетта Эдуардовна",
    "Нестерова Эльза Даниловна",
    "Фёдорова Агата Ефимовна",
    "Силина Ядвига Святославовна",
    "Комиссарова Наталия Федосеевна",
    "Миронова Данута Христофоровна",
    "Борисова Раиса Якуновна",
    "Новикова Фаина Артёмовна",
    "Сафонова Белла Феликсовна",
    "Савельева Тамара Васильевна",
    "Мартынова Габриэлла Матвеевна",
    "Жукова Эстелла Федосеевна",
    "Кузьмина Зара Донатовна",
    "Федотова Яна Эльдаровна",
    "Громова Илона Вадимовна",
    "Суханова Арьяна Иринеевна",
    "Щербакова Капитолина Фроловна",
    "Ершова Биргит Игнатьевна",
    "Белозёрова Эдуарда Владимировна",
    "Кузнецова Эмбер Анатольевна",
    "Кудрявцева Никки Юрьевна",
    "Копылова Дания Семёновна",
    "Сазонова Ляля Федотовна",
    "Александрова Данута Федоровна",
    "Петухова Диша Ивановна",
    "Афанасьева Фия Макаровна",
    "Власова Виктория Якововна",
    "Зуева Гелла Евсеевна",
    "Меркушева Златослава Пантелеймоновна",
    "Савельева Триана Дмитрьевна",
    "Некрасова Харитина Онисимовна",
    "Вишнякова Эстелла Протасьевна",
    "Кудрявцева Зоя Львовна",
    "Богданова Номи Эдуардовна",
    "Сергеева Калерия Альбертовна",
    "Стрелкова Майя Олеговна",
    "Дьячкова Елена Владиславовна",
    "Иванкова Ираида Агафоновна",
    "Смирнова Дина Юрьевна",
    "Зимина Анфиса Мироновна",
    "Захарова Лигия Витальевна",
    "Игнатьева Алевтина Никитевна",
    "Денисова Лунара Семеновна",
    "Бирюкова Аксинья Геласьевна",
    "Савина Марианна Андреевна",
    "Фомичёва Полина Митрофановна",
    "Полякова Динара Юрьевна",
    "Фадеева Жанна Аркадьевна",
    "Степанова Янина Донатовна",
    "Тарасова Веста Макаровна",
    "Лазарева Алика Платоновна",
    "Кузнецова Эльвина Георгьевна",
    "Рябова Валерия Адольфовна",
    "Белозёрова Анжелика Васильевна",
    "Федосеева Моника Прокловна",
    "Васильева Данна Ефимовна",
    "Воробьёва Олеся Всеволодовна",
    "Шестакова Вера Юлиановна",
    "Филатова Анфиса Мироновна",
    "Александрова Хельга Иринеевна",
    "Дорофеева Жасмин Агафоновна",
    "Белозёрова Кира Альвиановна",
    "Никонова Светлана Мэлсовна",
    "Корнилова Данута Александровна",
    "Лукина Властилина Семёновна",
    "Романова Лилия Владленовна",
    "Игнатьева Беатриса Мэлсовна",
    "Мухина Агата Юлиановна",
    "Матвеева Лигия Ильяовна",
    "Антонова Мишель Тимуровна",
    "Медведева Келен Руслановна",
    "Семёнова Есения Наумовна",
    "Сергеева Сафина Вениаминовна",
    "Быкова Ясмина Мироновна",
    "Шубина Виталина Всеволодовна",
    "Горшкова Амелия Лаврентьевна"
]
towns = [
    "Абакан",
    "Азов",
    "Александров",
    "Алексин",
    "Альметьевск",
    "Анапа",
    "Ангарск",
    "Анжеро-Судженск",
    "Апатиты",
    "Арзамас",
    "Армавир",
    "Арсеньев",
    "Артем",
    "Архангельск",
    "Асбест",
    "Астрахань",
    "Ачинск",
    "Балаково",
    "Балахна",
    "Балашиха",
    "Балашов",
    "Барнаул",
    "Батайск",
    "Белгород",
    "Белебей",
    "Белово",
    "Белогорск (Амурская область)",
    "Белорецк",
    "Белореченск",
    "Бердск",
    "Березники",
    "Березовский (Свердловская область)",
    "Бийск",
    "Биробиджан",
    "Благовещенск (Амурская область)",
    "Бор",
    "Борисоглебск",
    "Боровичи",
    "Братск",
    "Брянск",
    "Бугульма",
    "Буденновск",
    "Бузулук",
    "Буйнакск",
    "Великие Луки",
    "Великий Новгород",
    "Верхняя Пышма",
    "Видное",
    "Владивосток",
    "Владикавказ",
    "Владимир",
    "Волгоград",
    "Волгодонск",
    "Волжск",
    "Волжский",
    "Вологда",
    "Вольск",
    "Воркута",
    "Воронеж",
    "Воскресенск",
    "Воткинск",
    "Всеволожск",
    "Выборг",
    "Выкса",
    "Вязьма",
    "Гатчина",
    "Геленджик",
    "Георгиевск",
    "Глазов",
    "Горно-Алтайск",
    "Грозный",
    "Губкин",
    "Гудермес",
    "Гуково",
    "Гусь-Хрустальный",
    "Дербент",
    "Дзержинск",
    "Димитровград",
    "Дмитров",
    "Долгопрудный",
    "Домодедово",
    "Донской",
    "Дубна",
    "Евпатория",
    "Егорьевск",
    "Ейск",
    "Екатеринбург",
    "Елабуга",
    "Елец",
    "Ессентуки",
    "Железногорск (Красноярский край)",
    "Железногорск (Курская область)",
    "Жигулевск",
    "Жуковский",
    "Заречный",
    "Зеленогорск",
    "Зеленодольск",
    "Златоуст",
    "Иваново",
    "Ивантеевка",
    "Ижевск",
    "Избербаш",
    "Иркутск",
    "Искитим",
    "Ишим",
    "Ишимбай",
    "Йошкар-Ола",
    "Казань",
    "Калининград",
    "Калуга",
    "Каменск-Уральский",
    "Каменск-Шахтинский",
    "Камышин",
    "Канск",
    "Каспийск",
    "Кемерово",
    "Керчь",
    "Кинешма",
    "Кириши",
    "Киров (Кировская область)",
    "Кирово-Чепецк",
    "Киселевск",
    "Кисловодск",
    "Клин",
    "Клинцы",
    "Ковров",
    "Когалым",
    "Коломна",
    "Комсомольск-на-Амуре",
    "Копейск",
    "Королев",
    "Кострома",
    "Котлас",
    "Красногорск",
    "Краснодар",
    "Краснокаменск",
    "Краснокамск",
    "Краснотурьинск",
    "Красноярск",
    "Кропоткин",
    "Крымск",
    "Кстово",
    "Кузнецк",
    "Кумертау",
    "Кунгур",
    "Курган",
    "Курск",
    "Кызыл",
    "Лабинск",
    "Лениногорск",
    "Ленинск-Кузнецкий",
    "Лесосибирск",
    "Липецк",
    "Лиски",
    "Лобня",
    "Лысьва",
    "Лыткарино",
    "Люберцы",
    "Магадан",
    "Магнитогорск",
    "Майкоп",
    "Махачкала",
    "Междуреченск",
    "Мелеуз",
    "Миасс",
    "Минеральные Воды",
    "Минусинск",
    "Михайловка",
    "Михайловск (Ставропольский край)",
    "Мичуринск",
    "Москва",
    "Мурманск",
    "Муром",
    "Мытищи",
    "Набережные Челны",
    "Назарово",
    "Назрань",
    "Нальчик",
    "Наро-Фоминск",
    "Находка",
    "Невинномысск",
    "Нерюнгри",
    "Нефтекамск",
    "Нефтеюганск",
    "Нижневартовск",
    "Нижнекамск",
    "Нижний Новгород",
    "Нижний Тагил",
    "Новоалтайск",
    "Новокузнецк",
    "Новокуйбышевск",
    "Новомосковск",
    "Новороссийск",
    "Новосибирск",
    "Новотроицк",
    "Новоуральск",
    "Новочебоксарск",
    "Новочеркасск",
    "Новошахтинск",
    "Новый Уренгой",
    "Ногинск",
    "Норильск",
    "Ноябрьск",
    "Нягань",
    "Обнинск",
    "Одинцово",
    "Озерск",
    "Октябрьский",
    "Омск",
    "Орел",
    "Оренбург",
    "Орехово-Зуево",
    "Орск",
    "Павлово",
    "Павловский Посад",
    "Пенза",
    "Первоуральск",
    "Пермь",
    "Петрозаводск",
    "Петропавловск-Камчатский",
    "Подольск",
    "Полевской",
    "Прокопьевск",
    "Прохладный",
    "Псков",
    "Пушкино",
    "Пятигорск",
    "Раменское",
    "Ревда",
    "Реутов",
    "Ржев",
    "Рославль",
    "Россошь",
    "Ростов-на-Дону",
    "Рубцовск",
    "Рыбинск",
    "Рязань",
    "Салават",
    "Сальск",
    "Самара",
    "Санкт-Петербург",
    "Саранск",
    "Сарапул",
    "Саратов",
    "Саров",
    "Свободный",
    "Севастополь",
    "Северодвинск",
    "Северск",
    "Сергиев Посад",
    "Серов",
    "Серпухов",
    "Сертолово",
    "Сибай",
    "Симферополь",
    "Славянск-на-Кубани",
    "Смоленск",
    "Соликамск",
    "Солнечногорск",
    "Сосновый Бор",
    "Сочи",
    "Ставрополь",
    "Старый Оскол",
    "Стерлитамак",
    "Ступино",
    "Сургут",
    "Сызрань",
    "Сыктывкар",
    "Таганрог",
    "Тамбов",
    "Тверь",
    "Тимашевск",
    "Тихвин",
    "Тихорецк",
    "Тобольск",
    "Тольятти",
    "Томск",
    "Троицк",
    "Туапсе",
    "Туймазы",
    "Тула",
    "Тюмень",
    "Узловая",
    "Улан-Удэ",
    "Ульяновск",
    "Урус-Мартан",
    "Усолье-Сибирское",
    "Уссурийск",
    "Усть-Илимск",
    "Уфа",
    "Ухта",
    "Феодосия",
    "Фрязино",
    "Хабаровск",
    "Ханты-Мансийск",
    "Хасавюрт",
    "Химки",
    "Чайковский",
    "Чапаевск",
    "Чебоксары",
    "Челябинск",
    "Черемхово",
    "Череповец",
    "Черкесск",
    "Черногорск",
    "Чехов",
    "Чистополь",
    "Чита",
    "Шадринск",
    "Шали",
    "Шахты",
    "Шуя",
    "Щекино",
    "Щелково",
    "Электросталь",
    "Элиста",
    "Энгельс",
    "Южно-Сахалинск",
    "Юрга",
    "Якутск",
    "Ялта",
    "Ярославль"
]
streets = [
    "Квартал 1",
    "1-й Дунайский переулок",
    "1-й Зимёнковский переулок",
    "1-й Моравский переулок",
    "1-й Ходынский проезд",
    "1-я Рыбацкая улица",
    "Квартал 10",
    "Улица 10-летия Октября",
    "Квартал 100",
    "Квартал 11",
    "Аллея 11-ти Героев Сапёров",
    "Квартал 110",
    "Квартал 110",
    "Квартал 12",
    "Квартал 120",
    "Квартал 13",
    "Квартал 130",
    "Квартал 14",
    "Квартал 15",
    "Квартал 16",
    "Квартал 17",
    "Улица 1812 года",
    "Улица 1905 года",
    "Квартал 2",
    "2-й Дунайский переулок",
    "2-й Моравский переулок",
    "2-й Ходынский проезд",
    "Квартал 200",
    "Улица 26-ти Бакинских Комиссаров",
    "Квартал 3",
    "3-й Дунайский переулок",
    "3-й Моравский переулок",
    "3-й Нагатинский проезд",
    "3-й Силикатный проезд",
    "3-й Ходынский проезд",
    "Квартал 300",
    "Квартал 310",
    "Квартал 320",
    "Квартал 330",
    "Квартал 340",
    "Квартал 350",
    "Квартал 360",
    "Квартал 370",
    "Квартал 380",
    "Квартал 390",
    "Квартал 4",
    "4-й Дунайский переулок",
    "4-й Ходынский проезд",
    "Проспект 40 лет Октября",
    "Квартал 400",
    "Квартал 410",
    "Квартал 420",
    "Квартал 430",
    "Квартал 440",
    "Квартал 450",
    "Квартал 460",
    "Квартал 470",
    "Квартал 480",
    "Квартал 490",
    "Квартал 5",
    "5-я Ватутинская улица",
    "Улица 50 лет Октября",
    "Квартал 500",
    "Квартал 510",
    "Квартал 520",
    "Квартал 530",
    "Квартал 6",
    "Проспект 60-летия Октября",
    "Площадь 60-летия СССР",
    "Квартал 7",
    "Квартал 8",
    "Улица 8 Марта",
    "Улица 8 Марта",
    "Улица 8 Марта",
    "8 Марта 1-я улица",
    "8 Марта 4-я улица",
    "Улица 800-летия Москвы",
    "Квартал 9",
    "9 Мая улица",
    "Абельмановская улица",
    "Площадь Абельмановская Застава",
    "Абрамцевская просека",
    "Абрамцевская улица",
    "Абрикосовский переулок",
    "Авангардная улица",
    "Улица Авиаконструктора Микояна",
    "Улица Авиаконструктора Миля",
    "Улица Авиаконструктора Петлякова",
    "Улица Авиаконструктора Сухого",
    "Улица Авиаконструктора Яковлева",
    "Всехсвятский проезд",
    "Вспольный переулок",
    "Улица Вучетича",
    "Выборгская улица",
    "Переулок Выползов",
    "Высокая улица",
    "Высоковольтный проезд",
    "Высотный проезд",
    "Улица Высоцкого",
    "Выставочный переулок",
    "Вышеславцев 1-й переулок",
    "Вышеславцев 2-й переулок",
    "Вяземская улица",
    "Вязовский 1-й проезд",
    "Вязовский 2-й проезд",
    "Вятская улица",
    "Вятский 4-й переулок",
    "Улица Габричевского",
    "Переулок Гавриков М.",
    "Улица Гаврикова",
    "Площадь Гагарина",
    "Улица Гагарина",
    "Гагаринский переулок",
    "Газгольдерная улица",
    "Газетный переулок",
    "Газовский переулок",
    "Улица Газопровод",
    "Улица Галины Вишневской",
    "Улица Гамалеи",
    "Гамсоновский переулок",
    "Площадь Ганецкого",
    "Набережная Ганнушкина",
    "Гаражная улица",
    "Гарднеровский переулок",
    "Улица Гарибальди",
    "Улица Гастелло",
    "Гатчинская улица",
    "Улица Гашека",
    "Гвардейская улица",
    "Сквер гвардии полковника Ерастова",
    "Улица Гвоздева",
    "Улица Генерала Антонова",
    "Улица Генерала Артемьева",
    "Улица Генерала Белобородова",
    "Улица Генерала Белова",
    "Улица Генерала Глаголева",
    "Улица Генерала Дорохова",
    "Улица Генерала Ермолова",
    "Площадь Генерала Жадова",
    "Улица Генерала Ивашутина",
    "Бульвар Генерала Карбышева",
    "Улица Генерала Колесника",
    "Улица Генерала Кузнецова",
    "Улица Генерала Максимчука",
    "Улица Генерала Милорадовича",
    "Улица Генерала Рычагова",
    "Улица Генерала Сандалова",
    "Улица Генерала Трошева",
    "Улица Генерала Тюленева",
    "Улица Генерала Яковлева",
    "Георгиевский переулок",
    "Улица Герасима Курина",
    "Улица Героев Панфиловцев",
    "Сквер Героев-Чернобыльцев",
    "Улица Героя России Чернышева",
    "Гжатская улица",
    "Гжельский переулок",
    "Улица Гиляровского",
    "Гимнастическая улица",
    "Проезд Главмосстроя",
    "Улица Главмосстроя",
    "Главная аллея",
    "Главная улица",
    "Глазовский переулок",
    "Глебовская улица",
    "Глебовский переулок",
    "Глинистый переулок",
    "Глинищевский переулок",
    "Глубокий переулок",
    "Переулок Глухарев",
    "Переулок Гнездниковский Б.",
    "Переулок Гнездниковский М.",
    "Улица Говорова",
    "Гоголевский бульвар",
    "Улица Годовикова",
    "Голиковский переулок",
    "Головановский переулок",
    "Улица Головачёва",
    "Переулок Головин Б.",
    "Переулок Головин М.",
    "Щербинская улица",
    "Щетининский переулок",
    "Щибровская улица",
    "Щипковский 1-й переулок",
    "Щипковский 2-й переулок",
    "Щипковский 4-й переулок",
    "Улица Щипок",
    "Улица Щорса",
    "Щукинская улица",
    "Щукинский 3-й проезд",
    "Элеваторная улица",
    "Элеваторный переулок",
    "Электрический переулок",
    "Электродная улица",
    "Электродный переулок",
    "Электродный проезд",
    "Электрозаводская улица",
    "Электрозаводский 1-й переулок",
    "Электрозаводский 2-й переулок",
    "Электролитный проезд",
    "Улица Эльдара Рязанова",
    "Эльдорадовский переулок",
    "Энергетическая улица",
    "Энергетический проезд",
    "Бульвар Энтузиастов",
    "Проезд Энтузиастов",
    "Шоссе Энтузиастов",
    "Энтузиастов 1-я улица",
    "Энтузиастов 2-я улица",
    "Площадь Эрнста Тельмана",
    "Юго-Запада 37-й квартал",
    "Юго-Запада 38-й квартал",
    "Югорский проезд",
    "Южнобутовская улица",
    "Южнопортовая улица",
    "Южнопортовый 1-й проезд",
    "Южнопортовый 2-й проезд",
    "Южный проезд",
    "Улица Юлиана Семёнова",
    "Улица Юлиуса Фучика",
    "Улица Юннатов",
    "Улица Юности",
    "Улица Юных Ленинцев",
    "Юпитерская улица",
    "Улица Юрия Никулина",
    "Юрловский проезд",
    "Юровская улица",
    "Юрьевская улица",
    "Юрьевский переулок",
    "Улица Юшуньская Б.",
    "Улица Юшуньская М.",
    "Яблонный переулок",
    "Улица Яблочкова",
    "Ягодная улица",
    "Языковский переулок",
    "Улица Якиманка Б.",
    "Улица Якиманка М.",
    "Якиманская набережная",
    "Якиманский переулок",
    "Якиманский проезд",
    "Яковлевская улица",
    "Яковоапостольский переулок",
    "Якорная улица",
    "Проезд Якушкина",
    "Ялтинская улица",
    "Ямская 1-я улица",
    "Ямская 2-я улица",
    "Ямского Поля 1-я улица",
    "Ямского Поля 3-я улица",
    "Ямского Поля 5-я улица",
    "Бульвар Яна Райниса",
    "Янтарный проезд",
    "Ярославская улица",
    "Ярославское шоссе",
    "Ярцевская улица",
    "Ясеневая улица",
    "Ясногорская улица",
    "Яснополянская улица",
    "Ясный проезд",
    "Улица Яуза Платформа",
    "Яузская аллея",
    "Яузская улица",
    "Площадь Яузские Ворота",
    "Яузский бульвар",
    "Яхромская улица",
    "Яхромский проезд"
]
genders = ["male", "female"]

def generate_one_citizen(id=1):
    citizen = CitizenDTO()
    citizen.citizen_id = id
    citizen.town = random.choice(towns)
    citizen.street = random.choice(streets)
    citizen.building = "Да любой"
    citizen.appartement = random.randint(1, 1000)
    citizen.name = random.choice(names)
    citizen.birth_date = datetime.date(random.randint(1910, 2010), random.randint(1, 12), random.randint(1, 28)).strftime('%d.%m.%Y')
    citizen.gender = random.choice(genders)
    citizen.relatives = []

    return citizen


def generate_citizens(count=1, start_id=1, provide_relatives=True):
    citizens = []
    for i in range(count):
        citizens.append(generate_one_citizen(id=i+start_id))

    if provide_relatives:
        max_relatives = max_relatives_count
        citizens_ids = [citizen.citizen_id for citizen in citizens]
        for citizen in citizens:
            count_add_relatives = random.randint(0, min(len(citizens), max_relatives))
            new_relatives_ids = random.choices(citizens_ids, k=count_add_relatives)
            prev_citizen_rel_count = len(citizen.relatives)
            citizen.relatives = list(set(citizen.relatives + new_relatives_ids))
            for new_rel_id in new_relatives_ids:
                if citizen.citizen_id not in citizens[new_rel_id - 1].relatives:
                    citizens[new_rel_id - 1].relatives.append(citizen.citizen_id)
            added_relatives = len(citizen.relatives) - prev_citizen_rel_count
            max_relatives = max_relatives - added_relatives if max_relatives - added_relatives > 0 else 0

    return citizens


def generate_citizens_in_db(import_obj, count=1, to_return='gen'):
    gen_citizens = generate_citizens(count)
    db_citizens = [Citizen(import_id=import_obj,
                           citizen_id=citizen.citizen_id,
                           town=citizen.town,
                           street=citizen.street,
                           appartement=citizen.appartement,
                           name=citizen.name,
                           birth_date=datetime.datetime.strptime(citizen.birth_date, "%d.%m.%Y"),
                           gender=citizen.gender,
                           building=citizen.building) for citizen in gen_citizens]
    Citizen.objects.bulk_create(db_citizens)
    relatives = [Citizen.relatives.through(from_citizen_id= db_citizens[citizen.citizen_id - 1].id, to_citizen_id=db_citizens[cit_id - 1].id)
                 for citizen in gen_citizens
                 for cit_id in citizen.relatives]
    Citizen.relatives.through.objects.bulk_create(relatives)
    if to_return == 'gen':
        return gen_citizens
    elif to_return == 'db':
        return db_citizens
    return gen_citizens, db_citizens
